/**
 * @license ng-util(cipchk@qq.com) v10.1.1
 * (c) 2020 cipchk https://github.com/ng-util
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ng-util/lazy",["exports","@angular/common","@angular/core","rxjs","rxjs/operators"],t):t(((e=e||self)["ng-util"]=e["ng-util"]||{},e["ng-util"].lazy={}),e.ng.common,e.ng.core,e.rxjs,e.rxjs.operators)}(this,(function(e,t,r,n,o){"use strict";var a=function(){function e(e){this.doc=e,this.list={},this.cached={},this._notify=new n.BehaviorSubject([])}return Object.defineProperty(e.prototype,"change",{get:function(){return this._notify.asObservable().pipe(o.share(),o.filter((function(e){return 0!==e.length})))},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.list={},this.cached={}},e.prototype.load=function(e){var t=this;Array.isArray(e)||(e=[e]);var r=[];return e.forEach((function(e){e.endsWith(".js")?r.push(t.loadScript(e)):r.push(t.loadStyle(e))})),Promise.all(r).then((function(e){return t._notify.next(e),Promise.resolve(e)}))},e.prototype.loadScript=function(e,t){var r=this,n=Object.assign({},t).innerContent;return new Promise((function(t){if(!0!==r.list[e]){r.list[e]=!0;var o=function(n){r.cached[e]=n,t(n),r._notify.next([n])},a=r.doc.createElement("script");a.type="text/javascript",a.src=e,a.charset="utf-8",n&&(a.innerHTML=n),a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,o({path:e,status:"ok"}))}:a.onload=function(){return o({path:e,status:"ok"})},a.onerror=function(t){return o({path:e,status:"error",error:t})},r.doc.getElementsByTagName("head")[0].appendChild(a)}else t(Object.assign(Object.assign({},r.cached[e]),{status:"loading"}))}))},e.prototype.loadStyle=function(e,t){var r=this,n=Object.assign({rel:"stylesheet"},t),o=n.rel,a=n.innerContent;return new Promise((function(t){if(!0!==r.list[e]){r.list[e]=!0;var n=r.doc.createElement("link");n.rel=o,n.type="text/css",n.href=e,a&&(n.innerHTML=a),r.doc.getElementsByTagName("head")[0].appendChild(n);var i={path:e,status:"ok"};r.cached[e]=i,t(i)}else t(r.cached[e])}))},e}();a.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],a.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.Inject,args:[t.DOCUMENT]}]}]},a.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new a(r.ɵɵinject(t.DOCUMENT))},token:a,providedIn:"root"}),e.NuLazyService=a,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-util-lazy.umd.min.js.map