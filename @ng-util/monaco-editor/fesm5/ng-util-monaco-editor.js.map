{"version":3,"file":"ng-util-monaco-editor.js","sources":["ng://@ng-util/monaco-editor/monaco-editor.types.ts","ng://@ng-util/monaco-editor/monaco-editor.config.ts","ng://@ng-util/monaco-editor/monaco-editor-base.component.ts","ng://@ng-util/monaco-editor/monaco-editor.component.ts","ng://@ng-util/monaco-editor/monaco-editor-diff.component.ts","ng://@ng-util/monaco-editor/monaco-editor.module.ts"],"sourcesContent":["// tslint:disable-next-line: no-reference\n/// <reference path=\"./monaco.d.ts\" />\n\nexport interface NuMonacoEditorModel {\n  value?: string;\n  language?: string;\n  uri?: monaco.Uri;\n}\n\nexport interface NuMonacoEditorDiffModel {\n  code: string;\n  language?: string;\n}\n\nexport type NuMonacoEditorEventType = 'load-error' | 'init' | 're-init' | 'resize' | 'update-diff';\n\nexport interface NuMonacoEditorEvent {\n  type?: NuMonacoEditorEventType;\n  editor?: monaco.editor.IStandaloneCodeEditor | monaco.editor.IStandaloneDiffEditor;\n  error?: string;\n  /** Just only `nu-monaco-editor-diff` component */\n  diffValue?: string;\n}\n","import { InjectionToken } from '@angular/core';\n\nexport const NU_MONACO_EDITOR_CONFIG = new InjectionToken('NU_MONACO_EDITOR_CONFIG');\n\nexport interface NuMonacoEditorConfig {\n  /**\n   * The base URL to monaco editor library assets via AMD (RequireJS), Default: `https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min`\n   * You can using local path, e.g.: `assets/monaco-editor/min`.\n   */\n  baseUrl?: string;\n  /**\n   * Default options when creating editors\n   */\n  defaultOptions?: monaco.editor.IStandaloneEditorConstructionOptions;\n  /**\n   * The event after the first loading of the monaco editor library is completed, use this function to extend monaco editor functionalities.\n   * - @param `_monaco` equar to `window.monaco`\n   */\n  monacoLoad?: (_monaco: any) => void;\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  AfterViewInit,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  Output,\n  SimpleChange,\n  SimpleChanges,\n} from '@angular/core';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { NuMonacoEditorConfig, NU_MONACO_EDITOR_CONFIG } from './monaco-editor.config';\nimport { NuMonacoEditorEvent, NuMonacoEditorEventType } from './monaco-editor.types';\n\nlet loadedMonaco = false;\nlet loadPromise: Promise<void>;\n\nexport abstract class NuMonacoEditorBase implements AfterViewInit, OnChanges, OnDestroy {\n  protected _editor?: monaco.editor.IStandaloneCodeEditor | monaco.editor.IStandaloneDiffEditor;\n  protected _options: monaco.editor.IStandaloneEditorConstructionOptions;\n  protected _resize$: Subscription;\n  protected _config: NuMonacoEditorConfig;\n  protected _disabled = false;\n\n  @Input() height = `200px`;\n  @Input() delay = 0;\n  @Input()\n  set disabled(val: boolean | string) {\n    this._disabled = typeof val === 'string' ? true : val;\n    this.setDisabled();\n  }\n  @Input()\n  set options(val: monaco.editor.IStandaloneEditorConstructionOptions) {\n    this._options = { ...this._config.defaultOptions, ...val };\n  }\n  get options() {\n    return this._options;\n  }\n  @Output() event = new EventEmitter<NuMonacoEditorEvent>();\n\n  constructor(\n    protected el: ElementRef<HTMLElement>,\n    @Inject(NU_MONACO_EDITOR_CONFIG) config: NuMonacoEditorConfig,\n    @Inject(DOCUMENT) protected doc: any,\n    protected ngZone: NgZone,\n  ) {\n    this._config = { baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min', ...config };\n    this.options = this._config.defaultOptions!;\n  }\n\n  protected abstract initMonaco(options: monaco.editor.IStandaloneEditorConstructionOptions, initEvent: boolean): void;\n\n  protected notifyEvent(type: NuMonacoEditorEventType, other?: NuMonacoEditorEvent): void {\n    this.ngZone.run(() => this.event.emit({ type, editor: this._editor!, ...other }));\n  }\n\n  protected setDisabled(): this {\n    if (this._editor) {\n      (this._editor as monaco.editor.IStandaloneCodeEditor).updateOptions({ readOnly: this._disabled });\n    }\n    return this;\n  }\n\n  private init(): void {\n    if (loadedMonaco) {\n      loadPromise.then(() => this.initMonaco(this.options, true));\n      return;\n    }\n\n    loadedMonaco = true;\n    loadPromise = new Promise<void>((resolve: () => void, reject: (err: string) => void) => {\n      const win: any = window;\n      if (win == null) {\n        resolve();\n        return;\n      }\n\n      if (win.monaco) {\n        resolve();\n        return;\n      }\n\n      const baseUrl = this._config.baseUrl;\n      const amdLoader = () => {\n        win.require.config({ paths: { vs: `${baseUrl}/vs` } });\n        win.require(\n          ['vs/editor/editor.main'],\n          () => {\n            if (typeof this._config.monacoLoad === 'function') {\n              this._config.monacoLoad(win.monaco);\n            }\n            this.initMonaco(this.options, true);\n            resolve();\n          },\n          () => {\n            reject(`Unable to load editor/editor.main module, please check your network environment.`);\n          },\n        );\n      };\n\n      if (!win.require) {\n        const loaderScript = this.doc.createElement('script') as HTMLScriptElement;\n        loaderScript.type = 'text/javascript';\n        loaderScript.src = `${baseUrl}/vs/loader.js`;\n        loaderScript.onload = amdLoader;\n        loaderScript.onerror = () => reject(`Unable to load ${loaderScript.src}, please check your network environment.`);\n        this.doc.getElementsByTagName('head')[0].appendChild(loaderScript);\n      } else {\n        amdLoader();\n      }\n    }).catch(error => this.notifyEvent('load-error', { error }));\n  }\n\n  protected cleanResize(): this {\n    if (this._resize$) {\n      this._resize$.unsubscribe();\n    }\n    return this;\n  }\n\n  protected registerResize(): this {\n    this.cleanResize();\n    this._resize$ = fromEvent(window, 'resize')\n      .pipe(debounceTime(100))\n      .subscribe(() => {\n        this._editor!.layout();\n        this.notifyEvent('resize');\n      });\n    return this;\n  }\n\n  protected updateOptions(): void {\n    if (!this._editor) return;\n    this.ngZone.runOutsideAngular(() => {\n      this._editor!.dispose();\n      this.initMonaco(this._options, false);\n    });\n  }\n\n  ngAfterViewInit(): void {\n    this.ngZone.runOutsideAngular(() => setTimeout(() => this.init(), +this.delay));\n  }\n\n  ngOnChanges(changes: { [P in keyof this]?: SimpleChange } & SimpleChanges): void {\n    const allKeys = Object.keys(changes);\n    if (allKeys.length === 1 && allKeys[0] === 'disabled') return;\n    this.updateOptions();\n  }\n\n  ngOnDestroy(): void {\n    this.cleanResize();\n    if (this._editor) {\n      this._editor.dispose();\n      this._editor = undefined;\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component, forwardRef, Input } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { NuMonacoEditorBase } from './monaco-editor-base.component';\nimport { NuMonacoEditorModel } from './monaco-editor.types';\n\n@Component({\n  selector: 'nu-monaco-editor',\n  template: ``,\n  exportAs: 'nuMonacoEditor',\n  host: {\n    '[style.display]': `'block'`,\n    '[style.height]': 'height',\n  },\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NuMonacoEditorComponent),\n      multi: true,\n    },\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NuMonacoEditorComponent extends NuMonacoEditorBase implements ControlValueAccessor {\n  private _value = '';\n\n  @Input() model: NuMonacoEditorModel;\n\n  get editor(): monaco.editor.IStandaloneCodeEditor {\n    return this._editor as monaco.editor.IStandaloneCodeEditor;\n  }\n\n  private onChange = (_: string) => {};\n  private onTouched = () => {};\n\n  initMonaco(options: monaco.editor.IStandaloneEditorConstructionOptions, initEvent: boolean): void {\n    const hasModel = !!this.model;\n\n    if (hasModel) {\n      const model = monaco.editor.getModel(this.model.uri! || '');\n      if (model) {\n        options.model = model;\n        options.model.setValue(this._value);\n      } else {\n        const { value, language, uri } = this.model!;\n        options.model = monaco.editor.createModel(value || this._value, language, uri);\n      }\n    }\n\n    const editor = (this._editor = monaco.editor.create(this.el.nativeElement, options));\n\n    if (!hasModel) {\n      editor.setValue(this._value);\n    }\n\n    editor.onDidChangeModelContent(() => {\n      const value = editor.getValue();\n\n      this.ngZone.run(() => {\n        this._value = value;\n        this.onChange(value);\n      });\n    });\n    editor.onDidBlurEditorWidget(() => this.onTouched());\n\n    this.registerResize();\n    editor\n      .getAction('editor.action.formatDocument')\n      .run()\n      .then(() => this.notifyEvent(initEvent ? 'init' : 're-init'));\n  }\n\n  writeValue(value: string): void {\n    this._value = value || '';\n    if (this._editor) {\n      (this._editor as monaco.editor.IStandaloneCodeEditor).setValue(this._value);\n    }\n  }\n\n  registerOnChange(fn: (_: string) => void): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(_isDisabled: boolean): void {\n    this.disabled = _isDisabled;\n    this.setDisabled();\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { NuMonacoEditorBase } from './monaco-editor-base.component';\nimport { NuMonacoEditorDiffModel } from './monaco-editor.types';\n\n@Component({\n  selector: 'nu-monaco-diff-editor',\n  template: ``,\n  exportAs: 'nuMonacoDiffEditor',\n  host: {\n    '[style.display]': `'block'`,\n    '[style.height]': 'height',\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NuMonacoEditorDiffComponent extends NuMonacoEditorBase {\n  @Input() old: NuMonacoEditorDiffModel;\n  @Input() new: NuMonacoEditorDiffModel;\n\n  get editor(): monaco.editor.IStandaloneDiffEditor {\n    return this._editor as monaco.editor.IStandaloneDiffEditor;\n  }\n\n  initMonaco(options: monaco.editor.IStandaloneEditorConstructionOptions, initEvent: boolean): void {\n    if (!this.old || !this.new) {\n      throw new Error('old or new not found for nu-monaco-diff-editor');\n    }\n\n    const theme = options.theme;\n    const editor = (this._editor = monaco.editor.createDiffEditor(this.el.nativeElement, options));\n    options.theme = theme;\n    editor.setModel({\n      original: monaco.editor.createModel(this.old.code, this.old.language || options.language),\n      modified: monaco.editor.createModel(this.new.code, this.new.language || options.language),\n    });\n\n    // this.setDisabled();\n    editor.onDidUpdateDiff(() => this.notifyEvent('update-diff', { diffValue: editor.getModifiedEditor().getValue() }));\n\n    this.registerResize();\n    if (initEvent) this.notifyEvent('init');\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { NuMonacoEditorDiffComponent } from './monaco-editor-diff.component';\nimport { NuMonacoEditorComponent } from './monaco-editor.component';\nimport { NuMonacoEditorConfig, NU_MONACO_EDITOR_CONFIG } from './monaco-editor.config';\n\nconst COMPONENTS = [NuMonacoEditorComponent, NuMonacoEditorDiffComponent];\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: COMPONENTS,\n  exports: COMPONENTS,\n})\nexport class NuMonacoEditorModule {\n  static forRoot(config?: NuMonacoEditorConfig): ModuleWithProviders<NuMonacoEditorModule> {\n    return {\n      ngModule: NuMonacoEditorModule,\n      providers: [{ provide: NU_MONACO_EDITOR_CONFIG, useValue: config }],\n    };\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AACA;;;;;;kCAMC;;;IAHC,oCAAe;;IACf,uCAAkB;;IAClB,kCAAiB;;;;;sCAMlB;;;IAFC,uCAAa;;IACb,2CAAkB;;;;;kCAWnB;;;IALC,mCAA+B;;IAC/B,qCAAmF;;IACnF,oCAAe;;;;;IAEf,wCAAmB;;;;;;;;;ICnBR,uBAAuB,GAAG,IAAI,cAAc,CAAC,yBAAyB;;;;mCAiBlF;;;;;;;IAVC,uCAAiB;;;;;IAIjB,8CAAoE;;;;;;IAKpE,0CAAoC;;;;;;;;;ICClC,YAAY,GAAG,KAAK;;IACpB,WAA0B;;;;;IAyB5B,4BACY,EAA2B,EACJ,MAA4B,EACjC,GAAQ,EAC1B,MAAc;QAHd,OAAE,GAAF,EAAE,CAAyB;QAET,QAAG,GAAH,GAAG,CAAK;QAC1B,WAAM,GAAN,MAAM,CAAQ;QAtBhB,cAAS,GAAG,KAAK,CAAC;QAEnB,WAAM,GAAG,OAAO,CAAC;QACjB,UAAK,GAAG,CAAC,CAAC;QAaT,UAAK,GAAG,IAAI,YAAY,EAAuB,CAAC;QAQxD,IAAI,CAAC,OAAO,cAAK,OAAO,EAAE,iEAAiE,IAAK,MAAM,CAAE,CAAC;QACzG,IAAI,CAAC,OAAO,sBAAG,IAAI,CAAC,OAAO,CAAC,cAAc,EAAC,CAAC;KAC7C;IAtBD,sBACI,wCAAQ;;;;;QADZ,UACa,GAAqB;YAChC,IAAI,CAAC,SAAS,GAAG,OAAO,GAAG,KAAK,QAAQ,GAAG,IAAI,GAAG,GAAG,CAAC;YACtD,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;;;OAAA;IACD,sBACI,uCAAO;;;;QAGX;YACE,OAAO,IAAI,CAAC,QAAQ,CAAC;SACtB;;;;;QAND,UACY,GAAuD;YACjE,IAAI,CAAC,QAAQ,yBAAQ,IAAI,CAAC,OAAO,CAAC,cAAc,GAAK,GAAG,CAAE,CAAC;SAC5D;;;OAAA;;;;;;;IAkBS,wCAAW;;;;;;IAArB,UAAsB,IAA6B,EAAE,KAA2B;QAAhF,iBAEC;QADC,IAAI,CAAC,MAAM,CAAC,GAAG;;;QAAC,cAAM,OAAA,KAAI,CAAC,KAAK,CAAC,IAAI,YAAG,IAAI,MAAA,EAAE,MAAM,qBAAE,KAAI,CAAC,OAAO,EAAC,IAAK,KAAK,EAAG,GAAA,EAAC,CAAC;KACnF;;;;;;;IAES,wCAAW;;;;;;IAArB;QACE,IAAI,mBAAA,IAAI,GAAC,OAAO,EAAE;YAChB,oBAAC,mBAAA,IAAI,GAAC,OAAO,IAAyC,aAAa,CAAC,EAAE,QAAQ,EAAE,mBAAA,IAAI,GAAC,SAAS,EAAE,CAAC,CAAC;SACnG;QACD,0BAAO,IAAI,GAAC;KACb;;;;;IAEO,iCAAI;;;;IAAZ;QAAA,iBAgDC;QA/CC,IAAI,YAAY,EAAE;YAChB,WAAW,CAAC,IAAI;;;YAAC,cAAM,OAAA,KAAI,CAAC,UAAU,CAAC,KAAI,CAAC,OAAO,EAAE,IAAI,CAAC,GAAA,EAAC,CAAC;YAC5D,OAAO;SACR;QAED,YAAY,GAAG,IAAI,CAAC;QACpB,WAAW,GAAG,IAAI,OAAO;;;;;QAAO,UAAC,OAAmB,EAAE,MAA6B;;gBAC3E,GAAG,GAAQ,MAAM;YACvB,IAAI,GAAG,IAAI,IAAI,EAAE;gBACf,OAAO,EAAE,CAAC;gBACV,OAAO;aACR;YAED,IAAI,GAAG,CAAC,MAAM,EAAE;gBACd,OAAO,EAAE,CAAC;gBACV,OAAO;aACR;;gBAEK,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,OAAO;;gBAC9B,SAAS;;;YAAG;gBAChB,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAK,OAAO,QAAK,EAAE,EAAE,CAAC,CAAC;gBACvD,GAAG,CAAC,OAAO,CACT,CAAC,uBAAuB,CAAC;;;gBACzB;oBACE,IAAI,OAAO,KAAI,CAAC,OAAO,CAAC,UAAU,KAAK,UAAU,EAAE;wBACjD,KAAI,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;qBACrC;oBACD,KAAI,CAAC,UAAU,CAAC,KAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;oBACpC,OAAO,EAAE,CAAC;iBACX;;;gBACD;oBACE,MAAM,CAAC,kFAAkF,CAAC,CAAC;iBAC5F,EACF,CAAC;aACH,CAAA;YAED,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE;;oBACV,cAAY,sBAAG,KAAI,CAAC,GAAG,CAAC,aAAa,CAAC,QAAQ,CAAC,EAAqB;gBAC1E,cAAY,CAAC,IAAI,GAAG,iBAAiB,CAAC;gBACtC,cAAY,CAAC,GAAG,GAAM,OAAO,kBAAe,CAAC;gBAC7C,cAAY,CAAC,MAAM,GAAG,SAAS,CAAC;gBAChC,cAAY,CAAC,OAAO;;;gBAAG,cAAM,OAAA,MAAM,CAAC,oBAAkB,cAAY,CAAC,GAAG,6CAA0C,CAAC,GAAA,CAAA,CAAC;gBAClH,KAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,cAAY,CAAC,CAAC;aACpE;iBAAM;gBACL,SAAS,EAAE,CAAC;aACb;SACF,EAAC,CAAC,KAAK;;;;QAAC,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,WAAW,CAAC,YAAY,EAAE,EAAE,KAAK,OAAA,EAAE,CAAC,GAAA,EAAC,CAAC;KAC9D;;;;;;;IAES,wCAAW;;;;;;IAArB;QACE,IAAI,mBAAA,IAAI,GAAC,QAAQ,EAAE;YACjB,mBAAA,IAAI,GAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;SAC7B;QACD,0BAAO,IAAI,GAAC;KACb;;;;;;;IAES,2CAAc;;;;;;IAAxB;QAAA,iBASC;QARC,mBAAA,IAAI,GAAC,WAAW,EAAE,CAAC;QACnB,mBAAA,IAAI,GAAC,QAAQ,GAAG,SAAS,CAAC,MAAM,EAAE,QAAQ,CAAC;aACxC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;aACvB,SAAS;;;QAAC;YACT,mBAAA,mBAAA,KAAI,GAAC,OAAO,GAAE,MAAM,EAAE,CAAC;YACvB,mBAAA,KAAI,GAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;SAC5B,EAAC,CAAC;QACL,0BAAO,IAAI,GAAC;KACb;;;;;IAES,0CAAa;;;;IAAvB;QAAA,iBAMC;QALC,IAAI,CAAC,IAAI,CAAC,OAAO;YAAE,OAAO;QAC1B,IAAI,CAAC,MAAM,CAAC,iBAAiB;;;QAAC;YAC5B,mBAAA,KAAI,CAAC,OAAO,GAAE,OAAO,EAAE,CAAC;YACxB,KAAI,CAAC,UAAU,CAAC,KAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;SACvC,EAAC,CAAC;KACJ;;;;IAED,4CAAe;;;IAAf;QAAA,iBAEC;QADC,IAAI,CAAC,MAAM,CAAC,iBAAiB;;;QAAC,cAAM,OAAA,UAAU;;;QAAC,cAAM,OAAA,KAAI,CAAC,IAAI,EAAE,GAAA,GAAE,CAAC,KAAI,CAAC,KAAK,CAAC,GAAA,EAAC,CAAC;KACjF;;;;;IAED,wCAAW;;;;IAAX,UAAY,OAA6D;;YACjE,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;QACpC,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,KAAK,UAAU;YAAE,OAAO;QAC9D,IAAI,CAAC,aAAa,EAAE,CAAC;KACtB;;;;IAED,wCAAW;;;IAAX;QACE,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACvB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;SAC1B;KACF;;;gBA7JD,UAAU;gDA4CP,MAAM,SAAC,uBAAuB;gDAC9B,MAAM,SAAC,QAAQ;gBAzClB,MAAM;;;yBAsBL,KAAK;wBACL,KAAK;2BACL,KAAK;0BAKL,KAAK;wBAOL,MAAM;;IAsHT,yBAAC;CA3ID,IA2IC;;;;;;IA1IC,qCAA8F;;;;;IAC9F,sCAAuE;;;;;IACvE,sCAAiC;;;;;IACjC,qCAAwC;;;;;IACxC,uCAA4B;;IAE5B,oCAA0B;;IAC1B,mCAAmB;;IAanB,mCAA0D;;;;;IAGxD,gCAAqC;;;;;IAErC,iCAAoC;;;;;IACpC,oCAAwB;;;;;;;;IAM1B,4EAAqH;;;;;;;;;ICjC1E,2CAAkB;IAjB/D;QAAA,qEAqFC;QAnES,YAAM,GAAG,EAAE,CAAC;QAQZ,cAAQ;;;;QAAG,UAAC,CAAS,KAAO,EAAC;QAC7B,eAAS;;;QAAG,eAAQ,EAAC;;KA0D9B;IA/DC,sBAAI,2CAAM;;;;QAAV;YACE,0BAAO,IAAI,CAAC,OAAO,GAAwC;SAC5D;;;OAAA;;;;;;IAKD,4CAAU;;;;;IAAV,UAAW,OAA2D,EAAE,SAAkB;QAA1F,iBAmCC;;YAlCO,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK;QAE7B,IAAI,QAAQ,EAAE;;gBACN,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,mBAAA,IAAI,CAAC,KAAK,CAAC,GAAG,MAAK,EAAE,CAAC;YAC3D,IAAI,KAAK,EAAE;gBACT,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;gBACtB,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACrC;iBAAM;gBACC,IAAA,oCAAsC,EAApC,gBAAK,EAAE,sBAAQ,EAAE,YAAmB;gBAC5C,OAAO,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC;aAChF;SACF;;YAEK,MAAM,IAAI,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;QAEpF,IAAI,CAAC,QAAQ,EAAE;YACb,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC9B;QAED,MAAM,CAAC,uBAAuB;;;QAAC;;gBACvB,KAAK,GAAG,MAAM,CAAC,QAAQ,EAAE;YAE/B,KAAI,CAAC,MAAM,CAAC,GAAG;;;YAAC;gBACd,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACpB,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;aACtB,EAAC,CAAC;SACJ,EAAC,CAAC;QACH,MAAM,CAAC,qBAAqB;;;QAAC,cAAM,OAAA,KAAI,CAAC,SAAS,EAAE,GAAA,EAAC,CAAC;QAErD,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,MAAM;aACH,SAAS,CAAC,8BAA8B,CAAC;aACzC,GAAG,EAAE;aACL,IAAI;;;QAAC,cAAM,OAAA,KAAI,CAAC,WAAW,CAAC,SAAS,GAAG,MAAM,GAAG,SAAS,CAAC,GAAA,EAAC,CAAC;KACjE;;;;;IAED,4CAAU;;;;IAAV,UAAW,KAAa;QACtB,IAAI,CAAC,MAAM,GAAG,KAAK,IAAI,EAAE,CAAC;QAC1B,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,oBAAC,IAAI,CAAC,OAAO,IAAyC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC7E;KACF;;;;;IAED,kDAAgB;;;;IAAhB,UAAiB,EAAuB;QACtC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;KACpB;;;;;IAED,mDAAiB;;;;IAAjB,UAAkB,EAAO;QACvB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;KACrB;;;;;IAED,kDAAgB;;;;IAAhB,UAAiB,WAAoB;QACnC,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;QAC5B,IAAI,CAAC,WAAW,EAAE,CAAC;KACpB;;gBApFF,SAAS,SAAC;oBACT,QAAQ,EAAE,kBAAkB;oBAC5B,QAAQ,EAAE,EAAE;oBACZ,QAAQ,EAAE,gBAAgB;oBAC1B,IAAI,EAAE;wBACJ,iBAAiB,EAAE,SAAS;wBAC5B,gBAAgB,EAAE,QAAQ;qBAC3B;oBACD,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,EAAE,UAAU;;;4BAAC,cAAM,OAAA,uBAAuB,GAAA,EAAC;4BACtD,KAAK,EAAE,IAAI;yBACZ;qBACF;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;;wBAIE,KAAK;;IAiER,8BAAC;CAAA,CApE4C,kBAAkB,GAoE9D;;;;;;IAnEC,yCAAoB;;IAEpB,wCAAoC;;;;;IAMpC,2CAAqC;;;;;IACrC,4CAA6B;;;;;;;;;IClBkB,+CAAkB;IAVnE;;KAqCC;IAvBC,sBAAI,+CAAM;;;;QAAV;YACE,0BAAO,IAAI,CAAC,OAAO,GAAwC;SAC5D;;;OAAA;;;;;;IAED,gDAAU;;;;;IAAV,UAAW,OAA2D,EAAE,SAAkB;QAA1F,iBAkBC;QAjBC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;YAC1B,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;SACnE;;YAEK,KAAK,GAAG,OAAO,CAAC,KAAK;;YACrB,MAAM,IAAI,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;QAC9F,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;QACtB,MAAM,CAAC,QAAQ,CAAC;YACd,QAAQ,EAAE,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,IAAI,OAAO,CAAC,QAAQ,CAAC;YACzF,QAAQ,EAAE,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,IAAI,OAAO,CAAC,QAAQ,CAAC;SAC1F,CAAC,CAAC;;QAGH,MAAM,CAAC,eAAe;;;QAAC,cAAM,OAAA,KAAI,CAAC,WAAW,CAAC,aAAa,EAAE,EAAE,SAAS,EAAE,MAAM,CAAC,iBAAiB,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,GAAA,EAAC,CAAC;QAEpH,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,SAAS;YAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;KACzC;;gBApCF,SAAS,SAAC;oBACT,QAAQ,EAAE,uBAAuB;oBACjC,QAAQ,EAAE,EAAE;oBACZ,QAAQ,EAAE,oBAAoB;oBAC9B,IAAI,EAAE;wBACJ,iBAAiB,EAAE,SAAS;wBAC5B,gBAAgB,EAAE,QAAQ;qBAC3B;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;;sBAEE,KAAK;sBACL,KAAK;;IAyBR,kCAAC;CAAA,CA3BgD,kBAAkB,GA2BlE;;;IA1BC,0CAAsC;;IACtC,0CAAsC;;;;;;;;;ICVlC,UAAU,GAAG,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;;IAEzE;KAYC;;;;;IANQ,4BAAO;;;;IAAd,UAAe,MAA6B;QAC1C,OAAO;YACL,QAAQ,EAAE,oBAAoB;YAC9B,SAAS,EAAE,CAAC,EAAE,OAAO,EAAE,uBAAuB,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC;SACpE,CAAC;KACH;;gBAXF,QAAQ,SAAC;oBACR,OAAO,EAAE,CAAC,YAAY,CAAC;oBACvB,YAAY,EAAE,UAAU;oBACxB,OAAO,EAAE,UAAU;iBACpB;;IAQD,2BAAC;CAZD;;;;;;;;;;;;;;;;"}